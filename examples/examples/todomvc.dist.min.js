function e(e,t){e.appendChild(t)}function t(e,t,c,l,o){if(t[c])return void(t[c].$&&t[c].$(o));let n=l(o,e);t[c]=n}function c(e,t,c,l){if(e[t])return void i(e[t],l);let o={_:document.createElement(c),$p:l,$h:{}};i(o,l),e[t]=o}function l(e,t,c){c?e._.setAttribute(t,c):e._.removeAttribute(t),e.$p[t]=c}function o(e,t,c){e._[t]=c,e.$p[t]=c}function n(e,t,c){e.$p[t]&&e._.removeEventListener(t,e.$p[t]),e._.addEventListener(t,c),e.$p[t]=c}function i(e,t){t&&(t.$&&Object.keys(t.$).forEach(c=>l(e,c,t.$[c])),t.$e&&Object.keys(t.$e).forEach(c=>n(e,c,t.$e[c])),t.$p&&Object.keys(t.$p).forEach(c=>o(e,c,t.$p[c])),e.$p=t)}function d(t,c,l,o){let n=t[c]._,i=o||0,d=Array.from(n.childNodes),r=!d.length;if(!l||!d.length&&!l.length)return i;let s=l.reduce((e,t)=>e.concat(t),[]),a=new WeakSet;s.forEach(t=>{if(null==t)return;let c=function(e){return"string"==typeof e||"number"==typeof e}(t),l=c?document.createTextNode(t):t.$r?t.$r.$r?t.$r.$r._:t.$r._:t._,o=d.indexOf(l),s=d[i];return null!=l?r?(r=!1,a.add(l),e(n,l)):-1===o&&s&&!c?(a.add(l),n.insertBefore(l,s)):c&&s&&3===s.nodeType?(s.textContent=t,i++,void a.add(s)):d[o]===l?(i++,void a.add(l)):s?void 0:(a.add(l),e(n,l)):void 0}),d.forEach(e=>{a.has(e)||n.removeChild(e)})}let r=(()=>{let e=[];return{sHC:t=>e.push({ctx:t,pos:0,effects:[]}),pHC:()=>{let t=e.pop();t.pos=0,t.effects.forEach(e=>e()),t.effects=[]},gHC:()=>e[e.length-1]}})(),s=(e=[],t=[])=>e.length===t.length&&(!e.length&&!t.length||e.every((e,c)=>e===t[c])),[a,p,u]=(()=>{let e=new Map;let t=new Map;let c=new Map;return[function(t){let c=r.gHC(),l=e.get(c.ctx)||[],o=c.pos,n=void 0===l[o]?t:l[o];return c.pos+=1,l[o]=n,e.set(c.ctx,l),[n,t=>{let l=e.get(c.ctx)||[];l[o]=t,e.set(c.ctx,l),c.ctx.$&&c.ctx.$(c.ctx.$p)}]},function(e,c){let l=r.gHC(),o=t.get(l.ctx)||[],n=l.pos,i=o[n];l.pos+=1,i&&s(i.cache,c)||i&&Array.isArray(c)&&!c.length||(o[n]={cache:c},t.set(l.ctx,o),l.effects.push(()=>{i&&i.hookDestroy&&i.hookDestroy();let o=e(),d=t.get(l.ctx)||[];d[n]={hookDestroy:o,cache:c},t.set(l.ctx,d)}))},function(e){let t=r.gHC(),l=c.get(t.ctx)||[],o=t.pos,n=l[o];return t.pos+=1,n||(l[o]={current:e},c.set(t.ctx,l),l[o])}]})();const h="all",$="active",f="completed";function g(){var e,t,c="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(c+="-"),c+=(12===e?4:16===e?3&t|8:t).toString(16);return c}function b(e,t,i){var r=i||{$p:e,$:e=>{b(e,t,r)}};t.sHC(r);let s=[];e.todo.completed&&s.push("completed"),e.editing&&s.push("editing");let[p,u]=a(e.todo.title),h=()=>{let t=p.trim();t?e.onSave(t):e.onDestroy()};if(r!==i)return c(r,"bt","li",{$:{class:s.join(" ")}}),c(r,"bu","div",{$:{class:"view"}}),c(r,"bv","input",{$:{class:"toggle",type:"checkbox"},$e:{change:e.onToggle},$p:{checked:e.todo.completed}}),d(r,"bv"),c(r,"bw","label",{$e:{dblclick:e.onEdit}}),d(r,"bw",[e.todo.title]),c(r,"bx","button",{$:{class:"destroy"},$e:{click:e.onDestroy}}),d(r,"bx"),d(r,"bu",[r.bv,r.bw,r.bx]),c(r,"by","input",{$:{class:"edit"},$e:{input:e=>u(e.target.value),blur:h,keydown:t=>{27===t.which?(e.onCancel(event),u(e.todo.title)):13===event.which&&h()}},$p:{value:p}}),d(r,"by"),d(r,"bt",[r.bu,r.by]),r.$r=r.bt,t.pHC(),r;{let c=e.todo.completed;r.bv.$p.checked!==c&&o(r.bv,"checked",c);let i=e.onToggle;r.bv.$p.change!==i&&n(r.bv,"change",i),d(r,"bw",[e.todo.title]);let a=e.onEdit;r.bw.$p.dblclick!==a&&n(r.bw,"dblclick",a);let $=e.onDestroy;r.bx.$p.click!==$&&n(r.bx,"click",$);let f=p;r.by.$p.value!==f&&o(r.by,"value",f),n(r.by,"input",e=>u(e.target.value));let g=h;r.by.$p.blur!==g&&n(r.by,"blur",g),n(r.by,"keydown",t=>{27===t.which?(e.onCancel(event),u(e.todo.title)):13===event.which&&h()});let b=s.join(" ");r.bt.$p.class!==b&&l(r.bt,"class",b),t.pHC()}}function m(e,t,o){var i=o||{$p:e,$:e=>{m(e,t,i)}};t.sHC(i);let r=(s=e.count,a="item",1===s?a:a+"s");var s,a;let p=null;if(i!==o)return c(i,"bz","button",{$:{class:"clear-completed"},$e:{click:e.onClearCompleted}}),d(i,"bz",["Clear completed"]),e.completedCount>0&&(p=i.bz),c(i,"ca","footer",{$:{class:"footer"}}),c(i,"cb","span",{$:{class:"todo-count"}}),c(i,"cc","strong"),d(i,"cc",[e.count]),d(i,"cb",[i.cc," ",r," left"]),c(i,"cd","ul",{$:{class:"filters"}}),c(i,"ce","li"),c(i,"cf","a",{$:{href:"#/",class:e.nowShowing===h?"selected":""}}),d(i,"cf",["All"]),d(i,"ce",[i.cf]),c(i,"cg","li"),c(i,"ch","a",{$:{href:"#/active",class:e.nowShowing===$?"selected":""}}),d(i,"ch",["Active"]),d(i,"cg",[i.ch]),c(i,"ci","li"),c(i,"cj","a",{$:{href:"#/completed",class:e.nowShowing===f?"selected":""}}),d(i,"cj",["Completed"]),d(i,"ci",[i.cj]),d(i,"cd",[i.ce,i.cg,i.ci]),d(i,"ca",[i.cb,i.cd,p]),i.$r=i.ca,t.pHC(),i;{let c=e.onClearCompleted;i.bz.$p.click!==c&&n(i.bz,"click",c),e.completedCount>0&&(p=i.bz),d(i,"cc",[e.count]),d(i,"cb",[i.cc," ",r," left"]);let o=e.nowShowing===h?"selected":"";i.cf.$p.class!==o&&l(i.cf,"class",o);let s=e.nowShowing===$?"selected":"";i.ch.$p.class!==s&&l(i.ch,"class",s);let a=e.nowShowing===f?"selected":"";i.cj.$p.class!==a&&l(i.cj,"class",a),d(i,"ca",[i.cb,i.cd,p]),t.pHC()}}function v(e){switch(e){case"#/active":return $;case"#/completed":return f;default:return h}}!function(t,c,l,o){let n=l(o,c);if(n)t.innerHTML="",e(t,n.$r._)}(document.getElementById("app"),r,function e(l,i,r){var s=r||{$p:l,$:t=>{e(t,i,s)}};i.sHC(s);let[u,h]=a(""),[w,y]=a(v(window.location.hash)),[C,k]=function(){let[e,t]=a(JSON.parse(window.localStorage.getItem("__todos__")||"null")||[{id:g(),title:"todo 1",completed:!1},{id:g(),title:"todo 2",completed:!1},{id:g(),title:"todo 3",completed:!0}]);return[e,e=>{window.localStorage.setItem("__todos__",JSON.stringify(e)),t(e)}]}(),[x,H]=a(null);p(()=>{let e=()=>{y(v(window.location.hash))};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)});let _=C.filter(function(e){switch(w){case $:return!e.completed;case f:return e.completed;default:return!0}},this).map(function(e,c){var l={};if(i.sHC(l),l!==r)return t(i,l,"ck",b,{key:e.id,todo:e,editing:x===e.id,onEdit:()=>H(e.id),onSave:t=>{C.splice(c,1,{...e,title:t}),k(C),H(null)},onCancel:()=>H(null),onToggle:()=>{C.splice(c,1,{...e,completed:!e.completed}),k(C)},onDestroy:()=>{C.splice(c,1),k(C)}}),l.$r=l.ck,i.pHC(),l;l.ck.$({key:e.id,todo:e,editing:x===e.id,onEdit:()=>H(e.id),onSave:t=>{C.splice(c,1,{...e,title:t}),k(C),H(null)},onCancel:()=>H(null),onToggle:()=>{C.splice(c,1,{...e,completed:!e.completed}),k(C)},onDestroy:()=>{C.splice(c,1),k(C)}}),i.pHC()},this),S=C.reduce(function(e,t){return t.completed?e:e+1},0),E=C.length-S,j=null,D=null;if(s!==r)return c(s,"cl","section",{$:{class:"main"}}),c(s,"cm","input",{$:{id:"toggle-all",class:"toggle-all",type:"checkbox"},$e:{change:()=>{let e=C.every(e=>e.completed);k(C.map(t=>({...t,completed:!e})))}},$p:{checked:0===S}}),d(s,"cm"),c(s,"cn","label",{$:{for:"toggle-all"}}),d(s,"cn"),c(s,"co","ul",{$:{class:"todo-list"}}),d(s,"co",[_]),d(s,"cl",[s.cm,s.cn,s.co]),C.length&&(j=s.cl),t(i,s,"cp",m,{count:S,completedCount:E,nowShowing:w,onClearCompleted:()=>k(C.filter(e=>!e.completed))}),(S||E)&&(D=s.cp),c(s,"cq","div"),c(s,"cr","header",{$:{class:"header"}}),c(s,"cs","h1"),d(s,"cs",["todos"]),c(s,"ct","input",{$:{class:"new-todo",placeholder:"What needs to be done?",autoFocus:!0},$e:{input:e=>h(e.target.value),keydown:e=>{13===e.keyCode&&u&&(e.preventDefault(),C.push({id:g(),title:u,completed:!1}),k(C),h(""))}},$p:{value:u}}),d(s,"ct"),d(s,"cr",[s.cs,s.ct]),d(s,"cq",[s.cr,j,D]),s.$r=s.cq,i.pHC(),s;{let e=0===S;s.cm.$p.checked!==e&&o(s.cm,"checked",e),n(s.cm,"change",()=>{let e=C.every(e=>e.completed);k(C.map(t=>({...t,completed:!e})))}),d(s,"co",[_]),C.length&&(j=s.cl),s.cp.$({count:S,completedCount:E,nowShowing:w,onClearCompleted:()=>k(C.filter(e=>!e.completed))}),(S||E)&&(D=s.cp);let t=u;s.ct.$p.value!==t&&o(s.ct,"value",t),n(s.ct,"input",e=>h(e.target.value)),n(s.ct,"keydown",e=>{13===e.keyCode&&u&&(e.preventDefault(),C.push({id:g(),title:u,completed:!1}),k(C),h(""))}),d(s,"cq",[s.cr,j,D]),i.pHC()}},null);