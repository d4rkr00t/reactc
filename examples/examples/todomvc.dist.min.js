function e(e,t){e.appendChild(t)}function t(e,t,l,o,n){if(t[l])return void(t[l].$&&t[l].$(n));let c=o(n,e);t[l]=c}function l(e,t,l,o){if(e[t])return void i(e[t],o);let n={_:document.createElement(l),$p:o,$h:{}};i(n,o),e[t]=n}function o(e,t,l){l?e._.setAttribute(t,l):e._.removeAttribute(t),e.$p[t]=l}function n(e,t,l){e._[t]=l,e.$p[t]=l}function c(e,t,l){e.$p[t]&&e._.removeEventListener(t,e.$p[t]),e._.addEventListener(t,l),e.$p[t]=l}function i(e,t){t&&(t.$&&Object.keys(t.$).forEach(l=>o(e,l,t.$[l])),t.$e&&Object.keys(t.$e).forEach(l=>c(e,l,t.$e[l])),t.$p&&Object.keys(t.$p).forEach(l=>n(e,l,t.$p[l])),e.$p=t)}function d(t,l,o,n){let c=t[l]._,i=n||0,d=Array.from(c.childNodes),r=!d.length;if(!o||!d.length&&!o.length)return i;let a=o.reduce((e,t)=>e.concat(t),[]),s=new WeakSet;a.forEach(t=>{if(null==t)return;let l=function(e){return"string"==typeof e||"number"==typeof e}(t),o=l?document.createTextNode(t):t.$r?t.$r.$r?t.$r.$r._:t.$r._:t._,n=d.indexOf(o),a=d[i];return null!=o?r?(r=!1,s.add(o),e(c,o)):-1===n&&a&&!l?(s.add(o),c.insertBefore(o,a)):l&&a&&3===a.nodeType?(a.textContent=t,i++,void s.add(a)):d[n]===o?(i++,void s.add(o)):a?void 0:(s.add(o),e(c,o)):void 0}),d.forEach(e=>{s.has(e)||c.removeChild(e)})}let r=(()=>{let e=[];return{sHC:t=>e.push({ctx:t,pos:0}),pHC:()=>{e.pop().pos=0},gHC:()=>e[e.length-1]}})(),[a,s]=(()=>{let e=new Map;let t=new Map;return[function(t){let l=r.gHC(),o=e.get(l.ctx)||[],n=l.pos,c=void 0===o[n]?t:o[n];return l.pos+=1,o[n]=c,e.set(l.ctx,o),[c,t=>{let o=e.get(l.ctx)||[];o[n]=t,e.set(l.ctx,o),l.ctx.$&&l.ctx.$(l.ctx.$p)}]},function(e){let l=r.gHC(),o=t.get(l.ctx)||[],n=l.pos,c=o[n];c&&c();let i=e();i&&(o[n]=i,t.set(l.ctx,o))}]})();const p="all",u="active",$="completed";function h(){var e,t,l="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(l+="-"),l+=(12===e?4:16===e?3&t|8:t).toString(16);return l}function g(e,t,i){var r=i||{$p:e,$:e=>{g(e,t,r)}};t.sHC(r);let s=[];e.todo.completed&&s.push("completed"),e.editing&&s.push("editing");let[p,u]=a(e.todo.title),$=()=>{let t=p.trim();t?e.onSave(t):e.onDestroy()};if(r!==i)return l(r,"e61","li",{$:{class:s.join(" ")}}),l(r,"e62","div",{$:{class:"view"}}),l(r,"e63","input",{$:{class:"toggle",type:"checkbox"},$e:{change:e.onToggle},$p:{checked:e.todo.completed}}),d(r,"e63"),l(r,"e64","label",{$e:{dblclick:e.onEdit}}),d(r,"e64",[e.todo.title]),l(r,"e65","button",{$:{class:"destroy"},$e:{click:e.onDestroy}}),d(r,"e65"),d(r,"e62",[r.e63,r.e64,r.e65]),l(r,"e66","input",{$:{class:"edit"},$e:{input:e=>u(e.target.value),blur:$,keydown:t=>{27===t.which?(e.onCancel(event),u(e.todo.title)):13===event.which&&$()}},$p:{value:p}}),d(r,"e66"),d(r,"e61",[r.e62,r.e66]),r.$r=r.e61,t.pHC(),r;{let l=e.todo.completed;r.e63.$p.checked!==l&&n(r.e63,"checked",l);let i=e.onToggle;r.e63.$p.change!==i&&c(r.e63,"change",i);let a=e.onEdit;r.e64.$p.dblclick!==a&&c(r.e64,"dblclick",a),d(r,"e64",[e.todo.title]);let h=e.onDestroy;r.e65.$p.click!==h&&c(r.e65,"click",h);let g=p;r.e66.$p.value!==g&&n(r.e66,"value",g),c(r.e66,"input",e=>u(e.target.value));let f=$;r.e66.$p.blur!==f&&c(r.e66,"blur",f),c(r.e66,"keydown",t=>{27===t.which?(e.onCancel(event),u(e.todo.title)):13===event.which&&$()});let m=s.join(" ");r.e61.$p.class!==m&&o(r.e61,"class",m),t.pHC()}}function f(e,t,n){var i=n||{$p:e,$:e=>{f(e,t,i)}};t.sHC(i);let r=(a=e.count,s="item",1===a?s:s+"s");var a,s;let h=null;if(i!==n)return l(i,"e67","button",{$:{class:"clear-completed"},$e:{click:e.onClearCompleted}}),d(i,"e67",["Clear completed"]),e.completedCount>0&&(h=i.e67),l(i,"e68","footer",{$:{class:"footer"}}),l(i,"e69","span",{$:{class:"todo-count"}}),l(i,"e70","strong"),d(i,"e70",[e.count]),d(i,"e69",[i.e70," ",r," left"]),l(i,"e71","ul",{$:{class:"filters"}}),l(i,"e72","li"),l(i,"e73","a",{$:{href:"#/",class:e.nowShowing===p?"selected":""}}),d(i,"e73",["All"]),d(i,"e72",[i.e73]),l(i,"e74","li"),l(i,"e75","a",{$:{href:"#/active",class:e.nowShowing===u?"selected":""}}),d(i,"e75",["Active"]),d(i,"e74",[i.e75]),l(i,"e76","li"),l(i,"e77","a",{$:{href:"#/completed",class:e.nowShowing===$?"selected":""}}),d(i,"e77",["Completed"]),d(i,"e76",[i.e77]),d(i,"e71",[i.e72,i.e74,i.e76]),d(i,"e68",[i.e69,i.e71,h]),i.$r=i.e68,t.pHC(),i;{let l=e.onClearCompleted;i.e67.$p.click!==l&&c(i.e67,"click",l),e.completedCount>0&&(h=i.e67),d(i,"e70",[e.count]),d(i,"e69",[i.e70," ",r," left"]);let n=e.nowShowing===p?"selected":"";i.e73.$p.class!==n&&o(i.e73,"class",n);let a=e.nowShowing===u?"selected":"";i.e75.$p.class!==a&&o(i.e75,"class",a);let s=e.nowShowing===$?"selected":"";i.e77.$p.class!==s&&o(i.e77,"class",s),d(i,"e68",[i.e69,i.e71,h]),t.pHC()}}function m(e){switch(e){case"#/active":return u;case"#/completed":return $;default:return p}}!function(t,l,o,n){let c=o(n,l);if(c)t.innerHTML="",e(t,c.$r._)}(document.getElementById("app"),r,function e(o,i,r){var p=r||{$p:o,$:t=>{e(t,i,p)}};i.sHC(p);let[v,w]=a(""),[C,k]=a(m(window.location.hash)),[y,b]=function(){let[e,t]=a(JSON.parse(window.localStorage.getItem("__todos__")||"null")||[{id:h(),title:"todo 1",completed:!1},{id:h(),title:"todo 2",completed:!1},{id:h(),title:"todo 3",completed:!0}]);return[e,e=>{window.localStorage.setItem("__todos__",JSON.stringify(e)),t(e)}]}(),[_,H]=a(null);s(()=>{let e=()=>{k(m(window.location.hash))};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)});let S=y.filter(function(e){switch(C){case u:return!e.completed;case $:return e.completed;default:return!0}},this).map(function(e,l){var o={};if(i.sHC(o),o!==r)return t(i,o,"c7",g,{key:e.id,todo:e,editing:_===e.id,onEdit:()=>H(e.id),onSave:t=>{y.splice(l,1,{...e,title:t}),b(y),H(null)},onCancel:()=>H(null),onToggle:()=>{y.splice(l,1,{...e,completed:!e.completed}),b(y)},onDestroy:()=>{y.splice(l,1),b(y)}}),o.$r=o.c7,i.pHC(),o;o.c7.$({key:e.id,todo:e,editing:_===e.id,onEdit:()=>H(e.id),onSave:t=>{y.splice(l,1,{...e,title:t}),b(y),H(null)},onCancel:()=>H(null),onToggle:()=>{y.splice(l,1,{...e,completed:!e.completed}),b(y)},onDestroy:()=>{y.splice(l,1),b(y)}}),i.pHC()},this),x=y.reduce(function(e,t){return t.completed?e:e+1},0),E=y.length-x,D=null,T=null;if(p!==r)return l(p,"e78","section",{$:{class:"main"}}),l(p,"e79","input",{$:{id:"toggle-all",class:"toggle-all",type:"checkbox"},$e:{change:()=>{let e=y.every(e=>e.completed);b(y.map(t=>({...t,completed:!e})))}},$p:{checked:0===x}}),d(p,"e79"),l(p,"e80","label",{$:{for:"toggle-all"}}),d(p,"e80"),l(p,"e81","ul",{$:{class:"todo-list"}}),d(p,"e81",[S]),d(p,"e78",[p.e79,p.e80,p.e81]),y.length&&(D=p.e78),t(i,p,"c8",f,{count:x,completedCount:E,nowShowing:C,onClearCompleted:()=>b(y.filter(e=>!e.completed))}),(x||E)&&(T=p.c8),l(p,"e82","div"),l(p,"e83","header",{$:{class:"header"}}),l(p,"e84","h1"),d(p,"e84",["todos"]),l(p,"e85","input",{$:{class:"new-todo",placeholder:"What needs to be done?",autoFocus:!0},$e:{input:e=>w(e.target.value),keydown:e=>{13===e.keyCode&&v&&(e.preventDefault(),y.push({id:h(),title:v,completed:!1}),b(y),w(""))}},$p:{value:v}}),d(p,"e85"),d(p,"e83",[p.e84,p.e85]),d(p,"e82",[p.e83,D,T]),p.$r=p.e82,i.pHC(),p;{let e=0===x;p.e79.$p.checked!==e&&n(p.e79,"checked",e),c(p.e79,"change",()=>{let e=y.every(e=>e.completed);b(y.map(t=>({...t,completed:!e})))}),d(p,"e81",[S]),y.length&&(D=p.e78),p.c8.$({count:x,completedCount:E,nowShowing:C,onClearCompleted:()=>b(y.filter(e=>!e.completed))}),(x||E)&&(T=p.c8);let t=v;p.e85.$p.value!==t&&n(p.e85,"value",t),c(p.e85,"input",e=>w(e.target.value)),c(p.e85,"keydown",e=>{13===e.keyCode&&v&&(e.preventDefault(),y.push({id:h(),title:v,completed:!1}),b(y),w(""))}),d(p,"e82",[p.e83,D,T]),i.pHC()}},null);