function e(e,t){e.appendChild(t)}function t(e,t,c,l,o){if(t[c])return void(t[c].$&&t[c].$(o));let n=l(o,e);t[c]=n}function c(e,t,c,l){if(e[t])return void i(e[t],l);let o={_:document.createElement(c),$p:l,$h:{}};i(o,l),e[t]=o}function l(e,t,c){c?e._.setAttribute(t,c):e._.removeAttribute(t),e.$p[t]=c}function o(e,t,c){e._[t]=c,e.$p[t]=c}function n(e,t,c){e.$p[t]&&e._.removeEventListener(t,e.$p[t]),e._.addEventListener(t,c),e.$p[t]=c}function i(e,t){t&&(t.$&&Object.keys(t.$).forEach(c=>l(e,c,t.$[c])),t.$e&&Object.keys(t.$e).forEach(c=>n(e,c,t.$e[c])),t.$p&&Object.keys(t.$p).forEach(c=>o(e,c,t.$p[c])),e.$p=t)}function d(t,c,l,o){let n=t[c]._,i=o||0,d=Array.from(n.childNodes),r=!d.length;if(!l||!d.length&&!l.length)return i;let a=l.reduce((e,t)=>e.concat(t),[]),p=new WeakSet;a.forEach(t=>{if(null==t)return;let c=function(e){return"string"==typeof e||"number"==typeof e}(t),l=c?document.createTextNode(t):t.$r?t.$r.$r?t.$r.$r._:t.$r._:t._,o=d.indexOf(l),a=d[i];return null!=l?r?(r=!1,p.add(l),e(n,l)):-1===o&&a&&!c?(p.add(l),n.insertBefore(l,a)):c&&a&&3===a.nodeType?(a.textContent=t,i++,void p.add(a)):d[o]===l?(i++,void p.add(l)):a?void 0:(p.add(l),e(n,l)):void 0}),d.forEach(e=>{p.has(e)||n.removeChild(e)})}let r=(()=>{let e=[];return{sHC:t=>e.push({ctx:t,pos:0}),pHC:()=>{e.pop().pos=0},gHC:()=>e[e.length-1]}})(),[a,p]=(()=>{let e=new Map;let t=new Map;return[function(t){let c=r.gHC(),l=e.get(c.ctx)||[],o=c.pos,n=void 0===l[o]?t:l[o];return c.pos+=1,l[o]=n,e.set(c.ctx,l),[n,t=>{let l=e.get(c.ctx)||[];l[o]=t,e.set(c.ctx,l),c.ctx.$&&c.ctx.$(c.ctx.$p)}]},function(e){let c=r.gHC(),l=t.get(c.ctx)||[],o=c.pos,n=l[o];n&&n();let i=e();i&&(l[o]=i,t.set(c.ctx,l))}]})();const s="all",u="active",b="completed";function $(){var e,t,c="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(c+="-"),c+=(12===e?4:16===e?3&t|8:t).toString(16);return c}function h(e,t,i){var r=i||{$p:e,$:e=>{h(e,t,r)}};t.sHC(r);let p=[];e.todo.completed&&p.push("completed"),e.editing&&p.push("editing");let[s,u]=a(e.todo.title),b=()=>{let t=s.trim();t?e.onSave(t):e.onDestroy()};if(r!==i)return c(r,"bp","li",{$:{class:p.join(" ")}}),c(r,"bq","div",{$:{class:"view"}}),c(r,"br","input",{$:{class:"toggle",type:"checkbox"},$e:{change:e.onToggle},$p:{checked:e.todo.completed}}),d(r,"br"),c(r,"bs","label",{$e:{dblclick:e.onEdit}}),d(r,"bs",[e.todo.title]),c(r,"bt","button",{$:{class:"destroy"},$e:{click:e.onDestroy}}),d(r,"bt"),d(r,"bq",[r.br,r.bs,r.bt]),c(r,"bu","input",{$:{class:"edit"},$e:{input:e=>u(e.target.value),blur:b,keydown:t=>{27===t.which?(e.onCancel(event),u(e.todo.title)):13===event.which&&b()}},$p:{value:s}}),d(r,"bu"),d(r,"bp",[r.bq,r.bu]),r.$r=r.bp,t.pHC(),r;{let c=e.todo.completed;r.br.$p.checked!==c&&o(r.br,"checked",c);let i=e.onToggle;r.br.$p.change!==i&&n(r.br,"change",i);let a=e.onEdit;r.bs.$p.dblclick!==a&&n(r.bs,"dblclick",a),d(r,"bs",[e.todo.title]);let $=e.onDestroy;r.bt.$p.click!==$&&n(r.bt,"click",$);let h=s;r.bu.$p.value!==h&&o(r.bu,"value",h),n(r.bu,"input",e=>u(e.target.value));let f=b;r.bu.$p.blur!==f&&n(r.bu,"blur",f),n(r.bu,"keydown",t=>{27===t.which?(e.onCancel(event),u(e.todo.title)):13===event.which&&b()});let g=p.join(" ");r.bp.$p.class!==g&&l(r.bp,"class",g),t.pHC()}}function f(e,t,o){var i=o||{$p:e,$:e=>{f(e,t,i)}};t.sHC(i);let r=(a=e.count,p="item",1===a?p:p+"s");var a,p;let $=null;if(i!==o)return c(i,"bv","button",{$:{class:"clear-completed"},$e:{click:e.onClearCompleted}}),d(i,"bv",["Clear completed"]),e.completedCount>0&&($=i.bv),c(i,"bw","footer",{$:{class:"footer"}}),c(i,"bx","span",{$:{class:"todo-count"}}),c(i,"by","strong"),d(i,"by",[e.count]),d(i,"bx",[i.by," ",r," left"]),c(i,"bz","ul",{$:{class:"filters"}}),c(i,"ca","li"),c(i,"cb","a",{$:{href:"#/",class:e.nowShowing===s?"selected":""}}),d(i,"cb",["All"]),d(i,"ca",[i.cb]),c(i,"cc","li"),c(i,"cd","a",{$:{href:"#/active",class:e.nowShowing===u?"selected":""}}),d(i,"cd",["Active"]),d(i,"cc",[i.cd]),c(i,"ce","li"),c(i,"cf","a",{$:{href:"#/completed",class:e.nowShowing===b?"selected":""}}),d(i,"cf",["Completed"]),d(i,"ce",[i.cf]),d(i,"bz",[i.ca,i.cc,i.ce]),d(i,"bw",[i.bx,i.bz,$]),i.$r=i.bw,t.pHC(),i;{let c=e.onClearCompleted;i.bv.$p.click!==c&&n(i.bv,"click",c),e.completedCount>0&&($=i.bv),d(i,"by",[e.count]),d(i,"bx",[i.by," ",r," left"]);let o=e.nowShowing===s?"selected":"";i.cb.$p.class!==o&&l(i.cb,"class",o);let a=e.nowShowing===u?"selected":"";i.cd.$p.class!==a&&l(i.cd,"class",a);let p=e.nowShowing===b?"selected":"";i.cf.$p.class!==p&&l(i.cf,"class",p),d(i,"bw",[i.bx,i.bz,$]),t.pHC()}}function g(e){switch(e){case"#/active":return u;case"#/completed":return b;default:return s}}!function(t,c,l,o){let n=l(o,c);if(n)t.innerHTML="",e(t,n.$r._)}(document.getElementById("app"),r,function e(l,i,r){var s=r||{$p:l,$:t=>{e(t,i,s)}};i.sHC(s);let[m,v]=a(""),[w,C]=a(g(window.location.hash)),[k,y]=function(){let[e,t]=a(JSON.parse(window.localStorage.getItem("__todos__")||"null")||[{id:$(),title:"todo 1",completed:!1},{id:$(),title:"todo 2",completed:!1},{id:$(),title:"todo 3",completed:!0}]);return[e,e=>{window.localStorage.setItem("__todos__",JSON.stringify(e)),t(e)}]}(),[x,_]=a(null);p(()=>{let e=()=>{C(g(window.location.hash))};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)});let H=k.filter(function(e){switch(w){case u:return!e.completed;case b:return e.completed;default:return!0}},this).map(function(e,c){var l={};if(i.sHC(l),l!==r)return t(i,l,"cg",h,{key:e.id,todo:e,editing:x===e.id,onEdit:()=>_(e.id),onSave:t=>{k.splice(c,1,{...e,title:t}),y(k),_(null)},onCancel:()=>_(null),onToggle:()=>{k.splice(c,1,{...e,completed:!e.completed}),y(k)},onDestroy:()=>{k.splice(c,1),y(k)}}),l.$r=l.cg,i.pHC(),l;l.cg.$({key:e.id,todo:e,editing:x===e.id,onEdit:()=>_(e.id),onSave:t=>{k.splice(c,1,{...e,title:t}),y(k),_(null)},onCancel:()=>_(null),onToggle:()=>{k.splice(c,1,{...e,completed:!e.completed}),y(k)},onDestroy:()=>{k.splice(c,1),y(k)}}),i.pHC()},this),S=k.reduce(function(e,t){return t.completed?e:e+1},0),E=k.length-S,j=null,D=null;if(s!==r)return c(s,"ch","section",{$:{class:"main"}}),c(s,"ci","input",{$:{id:"toggle-all",class:"toggle-all",type:"checkbox"},$e:{change:()=>{let e=k.every(e=>e.completed);y(k.map(t=>({...t,completed:!e})))}},$p:{checked:0===S}}),d(s,"ci"),c(s,"cj","label",{$:{for:"toggle-all"}}),d(s,"cj"),c(s,"ck","ul",{$:{class:"todo-list"}}),d(s,"ck",[H]),d(s,"ch",[s.ci,s.cj,s.ck]),k.length&&(j=s.ch),t(i,s,"cl",f,{count:S,completedCount:E,nowShowing:w,onClearCompleted:()=>y(k.filter(e=>!e.completed))}),(S||E)&&(D=s.cl),c(s,"cm","div"),c(s,"cn","header",{$:{class:"header"}}),c(s,"co","h1"),d(s,"co",["todos"]),c(s,"cp","input",{$:{class:"new-todo",placeholder:"What needs to be done?",autoFocus:!0},$e:{input:e=>v(e.target.value),keydown:e=>{13===e.keyCode&&m&&(e.preventDefault(),k.push({id:$(),title:m,completed:!1}),y(k),v(""))}},$p:{value:m}}),d(s,"cp"),d(s,"cn",[s.co,s.cp]),d(s,"cm",[s.cn,j,D]),s.$r=s.cm,i.pHC(),s;{let e=0===S;s.ci.$p.checked!==e&&o(s.ci,"checked",e),n(s.ci,"change",()=>{let e=k.every(e=>e.completed);y(k.map(t=>({...t,completed:!e})))}),d(s,"ck",[H]),k.length&&(j=s.ch),s.cl.$({count:S,completedCount:E,nowShowing:w,onClearCompleted:()=>y(k.filter(e=>!e.completed))}),(S||E)&&(D=s.cl);let t=m;s.cp.$p.value!==t&&o(s.cp,"value",t),n(s.cp,"input",e=>v(e.target.value)),n(s.cp,"keydown",e=>{13===e.keyCode&&m&&(e.preventDefault(),k.push({id:$(),title:m,completed:!1}),y(k),v(""))}),d(s,"cm",[s.cn,j,D]),i.pHC()}},null);