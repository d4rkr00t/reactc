function e(e, t) {
  e.appendChild(t);
}
function t(e, t, o, l, n) {
  if (t[o]) return void (t[o].$ && t[o].$(n));
  let c = l(n, e);
  t[o] = c;
}
function o(e, t, o, l) {
  if (e[t]) return void n(e[t], l);
  let c = { _: document.createElement(o), $p: l, $h: {} };
  n(c, l), (e[t] = c);
}
function l(e, t, o) {
  if ("style" === t)
    e._[t] = Object.keys(o)
      .map(e => {
        let t = o[e],
          l = e.replace(/([A-Z])/g, e => "-" + e.toLowerCase());
        return (
          l +
          ": " +
          ("number" != typeof t ||
          -1 !== ["opacity", "flex", "z-index"].indexOf(l) ||
          l.match(/^--/)
            ? "" + t
            : t + "px")
        );
      })
      .join(";");
  else if (t.startsWith("on")) {
    let l = t.replace("on", "").toLowerCase();
    "change" === l &&
      "INPUT" === e._.nodeName &&
      "text" === e._.type &&
      (l = "input"),
      e.$p[t] && e._.removeEventListener(l, e.$p[t]),
      e._.addEventListener(l, o);
  } else
    ["value", "checked", "className"].indexOf(t) >= 0
      ? (e._[t] = o)
      : o
      ? e._.setAttribute(t, o)
      : e._.removeAttribute(t);
  e.$p[t] = o;
}
function n(e, t) {
  t && (Object.keys(t).forEach(o => l(e, o, t[o])), (e.$p = t));
}
function c(t, o, l, n) {
  let i = t[o]._,
    a = n || 0,
    r = Array.from(i.childNodes);
  if (l && (r.length || l.length))
    for (
      l.forEach(t => {
        if (null !== t) {
          if (
            (function(e) {
              return "string" == typeof e || "number" == typeof e;
            })(t)
          )
            return r[a]
              ? (3 === r[a].nodeType
                  ? r[a].textContent !== t && (r[a].textContent = t)
                  : i.replaceChild(document.createTextNode(t), r[a]),
                void a++)
              : (a++, e(i, document.createTextNode(t)));
          if (Array.isArray(t))
            return c({ $r: { _: i } }, "$r", t, a), void (a += t.length);
          {
            let o = t.$r ? (t.$r.$r ? t.$r.$r._ : t.$r._) : t._;
            if (r[a]) {
              if (r[a] !== o)
                try {
                  i.replaceChild(o, r[a]);
                } catch (e) {}
              return void a++;
            }
            if (r[a]) {
              if (r[a] !== o)
                try {
                  i.replaceChild(o, r[a]);
                } catch (e) {}
              return void a++;
            }
            return e(i, o), void a++;
          }
        }
        r[a] && (i.removeChild(r[a]), a++);
      });
      a < r.length;

    ) {
      if (r[a].parentNode)
        try {
          r[a].parentNode.removeChild(r[a]);
        } catch (e) {}
      a++;
    }
}
let i = (() => {
    let e = [];
    return {
      sHC: t => e.push({ ctx: t, pos: 0 }),
      pHC: () => {
        e.pop().pos = 0;
      },
      gHC: () => e[e.length - 1]
    };
  })(),
  [a, r] = (() => {
    let e = new Map();
    let t = new Map();
    return [
      function(t) {
        let o = i.gHC(),
          l = e.get(o.ctx) || [],
          n = o.pos,
          c = void 0 === l[n] ? t : l[n];
        return (
          (o.pos += 1),
          (l[n] = c),
          e.set(o.ctx, l),
          [
            c,
            t => {
              let l = e.get(o.ctx) || [];
              (l[n] = t), e.set(o.ctx, l), o.ctx.$ && o.ctx.$(o.ctx.$p);
            }
          ]
        );
      },
      function(e) {
        let o = i.gHC(),
          l = t.get(o.ctx) || [],
          n = o.pos,
          c = l[n];
        c && c();
        let a = e();
        a && ((l[n] = a), t.set(o.ctx, l));
      }
    ];
  })();
const d = "all",
  s = "active",
  p = "completed";
function u() {
  var e,
    t,
    o = "";
  for (e = 0; e < 32; e++)
    (t = (16 * Math.random()) | 0),
      (8 !== e && 12 !== e && 16 !== e && 20 !== e) || (o += "-"),
      (o += (12 === e ? 4 : 16 === e ? (3 & t) | 8 : t).toString(16));
  return o;
}
function h(e, t, n) {
  var i = n || {
    $p: e,
    $: e => {
      h(e, t, i);
    }
  };
  t.sHC(i);
  let r = [];
  e.todo.completed && r.push("completed"), e.editing && r.push("editing");
  let [d, s] = a(e.todo.title),
    p = () => {
      let t = d.trim();
      t ? e.onSave(t) : e.onDestroy();
    };
  if (i !== n)
    return (
      o(i, "e53", "li", { className: r.join(" ") }),
      o(i, "e54", "div", { className: "view" }),
      o(i, "e55", "input", {
        className: "toggle",
        type: "checkbox",
        checked: e.todo.completed,
        onChange: e.onToggle
      }),
      c(i, "e55"),
      o(i, "e56", "label", { onDblclick: e.onEdit }),
      c(i, "e56", [e.todo.title]),
      o(i, "e57", "button", { className: "destroy", onClick: e.onDestroy }),
      c(i, "e57"),
      c(i, "e54", [i.e55, i.e56, i.e57]),
      o(i, "e58", "input", {
        className: "edit",
        value: d,
        onChange: e => s(e.target.value),
        onBlur: p,
        onKeyDown: t => {
          27 === t.which
            ? (e.onCancel(event), s(e.todo.title))
            : 13 === event.which && p();
        }
      }),
      c(i, "e58"),
      c(i, "e53", [i.e54, i.e58]),
      (i.$r = i.e53),
      t.pHC(),
      i
    );
  {
    let o = e.todo.completed;
    i.e55.$p.checked !== o && l(i.e55, "checked", o);
    let n = e.onToggle;
    i.e55.$p.onChange !== n && l(i.e55, "onChange", n);
    let a = e.onEdit;
    i.e56.$p.onDoubleClick !== a && l(i.e56, "onDoubleClick", a),
      c(i, "e56", [e.todo.title]);
    let r = e.onDestroy;
    i.e57.$p.onClick !== r && l(i.e57, "onClick", r);
    let u = d;
    i.e58.$p.value !== u && l(i.e58, "value", u),
      l(i.e58, "onChange", e => s(e.target.value));
    let h = p;
    i.e58.$p.onBlur !== h && l(i.e58, "onBlur", h),
      l(i.e58, "onKeyDown", t => {
        27 === t.which
          ? (e.onCancel(event), s(e.todo.title))
          : 13 === event.which && p();
      }),
      t.pHC();
  }
}
function m(e, t, n) {
  var i = n || {
    $p: e,
    $: e => {
      m(e, t, i);
    }
  };
  t.sHC(i);
  let a = ((r = e.count), (u = "item"), 1 === r ? u : u + "s");
  var r, u;
  let h = null;
  if (i !== n)
    return (
      o(i, "e59", "button", {
        className: "clear-completed",
        onClick: e.onClearCompleted
      }),
      c(i, "e59", ["Clear completed"]),
      e.completedCount > 0 && (h = i.e59),
      o(i, "e60", "footer", { className: "footer" }),
      o(i, "e61", "span", { className: "todo-count" }),
      o(i, "e62", "strong"),
      c(i, "e62", [e.count]),
      c(i, "e61", [i.e62, " ", a, " left"]),
      o(i, "e63", "ul", { className: "filters" }),
      o(i, "e64", "li"),
      o(i, "e65", "a", {
        href: "#/",
        className: e.nowShowing === d ? "selected" : ""
      }),
      c(i, "e65", ["All"]),
      c(i, "e64", [i.e65]),
      o(i, "e66", "li"),
      o(i, "e67", "a", {
        href: "#/active",
        className: e.nowShowing === s ? "selected" : ""
      }),
      c(i, "e67", ["Active"]),
      c(i, "e66", [i.e67]),
      o(i, "e68", "li"),
      o(i, "e69", "a", {
        href: "#/completed",
        className: e.nowShowing === p ? "selected" : ""
      }),
      c(i, "e69", ["Completed"]),
      c(i, "e68", [i.e69]),
      c(i, "e63", [i.e64, i.e66, i.e68]),
      c(i, "e60", [i.e61, i.e63, h]),
      (i.$r = i.e60),
      t.pHC(),
      i
    );
  {
    let o = e.onClearCompleted;
    i.e59.$p.onClick !== o && l(i.e59, "onClick", o),
      e.completedCount > 0 && (h = i.e59),
      c(i, "e62", [e.count]),
      c(i, "e61", [i.e62, " ", a, " left"]);
    let n = e.nowShowing === d ? "selected" : "";
    i.e65.$p.className !== n && l(i.e65, "className", n);
    let r = e.nowShowing === s ? "selected" : "";
    i.e67.$p.className !== r && l(i.e67, "className", r);
    let u = e.nowShowing === p ? "selected" : "";
    i.e69.$p.className !== u && l(i.e69, "className", u),
      c(i, "e60", [i.e61, i.e63, h]),
      t.pHC();
  }
}
function g(e) {
  switch (e) {
    case "#/active":
      return s;
    case "#/completed":
      return p;
    default:
      return d;
  }
}
!(function(t, o, l, n) {
  let c = l(n, o);
  if (c) (t.innerHTML = ""), e(t, c.$r._);
})(
  document.getElementById("app"),
  i,
  function e(n, i, d) {
    var f = d || {
      $p: n,
      $: t => {
        e(t, i, f);
      }
    };
    i.sHC(f);
    let [C, v] = a(""),
      [w, $] = a(g(window.location.hash)),
      [y, N] = (function() {
        let [e, t] = a(
          JSON.parse(window.localStorage.getItem("__todos__") || "null") || [
            { id: u(), title: "todo 1", completed: !1 },
            { id: u(), title: "todo 2", completed: !1 },
            { id: u(), title: "todo 3", completed: !0 }
          ]
        );
        return [
          e,
          e => {
            window.localStorage.setItem("__todos__", JSON.stringify(e)), t(e);
          }
        ];
      })(),
      [k, _] = a(null);
    r(() => {
      let e = () => {
        $(g(window.location.hash));
      };
      return (
        window.addEventListener("hashchange", e),
        () => window.removeEventListener("hashchange", e)
      );
    });
    let x = y
        .filter(function(e) {
          switch (w) {
            case s:
              return !e.completed;
            case p:
              return e.completed;
            default:
              return !0;
          }
        }, this)
        .map(function(e, o) {
          var l = {};
          if ((i.sHC(l), l !== d))
            return (
              t(i, l, "c6", h, {
                key: e.id,
                todo: e,
                editing: k === e.id,
                onEdit: () => _(e.id),
                onSave: t => {
                  y.splice(o, 1, { ...e, title: t }), N(y), _(null);
                },
                onCancel: () => _(null),
                onToggle: () => {
                  y.splice(o, 1, { ...e, completed: !e.completed }), N(y);
                },
                onDestroy: () => {
                  y.splice(o, 1), N(y);
                }
              }),
              (l.$r = l.c6),
              i.pHC(),
              l
            );
          l.c6.$({
            key: e.id,
            todo: e,
            editing: k === e.id,
            onEdit: () => _(e.id),
            onSave: t => {
              y.splice(o, 1, { ...e, title: t }), N(y), _(null);
            },
            onCancel: () => _(null),
            onToggle: () => {
              y.splice(o, 1, { ...e, completed: !e.completed }), N(y);
            },
            onDestroy: () => {
              y.splice(o, 1), N(y);
            }
          }),
            i.pHC();
        }, this),
      H = y.reduce(function(e, t) {
        return t.completed ? e : e + 1;
      }, 0),
      b = y.length - H,
      S = null,
      D = null;
    if (f !== d)
      return (
        o(f, "e70", "section", { className: "main" }),
        o(f, "e71", "input", {
          id: "toggle-all",
          className: "toggle-all",
          type: "checkbox",
          checked: 0 === H,
          onChange: () => {
            let e = y.every(e => e.completed);
            N(y.map(t => ({ ...t, completed: !e })));
          }
        }),
        c(f, "e71"),
        o(f, "e72", "label", { for: "toggle-all" }),
        c(f, "e72"),
        o(f, "e73", "ul", { className: "todo-list" }),
        c(f, "e73", [x]),
        c(f, "e70", [f.e71, f.e72, f.e73]),
        y.length && (S = f.e70),
        t(i, f, "c7", m, {
          count: H,
          completedCount: b,
          nowShowing: w,
          onClearCompleted: () => N(y.filter(e => !e.completed))
        }),
        (H || b) && (D = f.c7),
        o(f, "e74", "div"),
        o(f, "e75", "header", { className: "header" }),
        o(f, "e76", "h1"),
        c(f, "e76", ["todos"]),
        o(f, "e77", "input", {
          className: "new-todo",
          placeholder: "What needs to be done?",
          autoFocus: !0,
          value: C,
          onChange: e => v(e.target.value),
          onKeyDown: e => {
            13 === e.keyCode &&
              C &&
              (e.preventDefault(),
              y.push({ id: u(), title: C, completed: !1 }),
              N(y),
              v(""));
          }
        }),
        c(f, "e77"),
        c(f, "e75", [f.e76, f.e77]),
        c(f, "e74", [f.e75, S, D]),
        (f.$r = f.e74),
        i.pHC(),
        f
      );
    {
      let e = 0 === H;
      f.e71.$p.checked !== e && l(f.e71, "checked", e),
        l(f.e71, "onChange", () => {
          let e = y.every(e => e.completed);
          N(y.map(t => ({ ...t, completed: !e })));
        }),
        c(f, "e73", [x]),
        y.length && (S = f.e70),
        f.c7.$({
          count: H,
          completedCount: b,
          nowShowing: w,
          onClearCompleted: () => N(y.filter(e => !e.completed))
        }),
        (H || b) && (D = f.c7);
      let t = C;
      f.e77.$p.value !== t && l(f.e77, "value", t),
        l(f.e77, "onChange", e => v(e.target.value)),
        l(f.e77, "onKeyDown", e => {
          13 === e.keyCode &&
            C &&
            (e.preventDefault(),
            y.push({ id: u(), title: C, completed: !1 }),
            N(y),
            v(""));
        }),
        c(f, "e74", [f.e75, S, D]),
        i.pHC();
    }
  },
  null
);
