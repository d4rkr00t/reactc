function e(e,t){e.appendChild(t)}function t(e,t,c,o,l){if(t[c])return void(t[c].$&&t[c].$(l));let n=o(l,e);t[c]=n}function c(e,t,c,o){if(e[t])return void i(e[t],o);let l={_:document.createElement(c),$p:o,$h:{}};i(l,o),e[t]=l}function o(e,t,c){c?e._.setAttribute(t,c):e._.removeAttribute(t),e.$p[t]=c}function l(e,t,c){e._[t]=c,e.$p[t]=c}function n(e,t,c){e.$p[t]&&e._.removeEventListener(t,e.$p[t]),e._.addEventListener(t,c),e.$p[t]=c}function i(e,t){t&&(t.$&&Object.keys(t.$).forEach(c=>o(e,c,t.$[c])),t.$e&&Object.keys(t.$e).forEach(c=>n(e,c,t.$e[c])),t.$p&&Object.keys(t.$p).forEach(c=>l(e,c,t.$p[c])),e.$p=t)}function d(t,c,o,l){let n=t[c]._,i=l||0,d=Array.from(n.childNodes),r=!d.length;if(!o||!d.length&&!o.length)return i;let s=o.reduce((e,t)=>e.concat(t),[]),a=new WeakSet;s.forEach(t=>{if(null==t)return;let c=function(e){return"string"==typeof e||"number"==typeof e}(t),o=c?document.createTextNode(t):t.$r?t.$r.$r?t.$r.$r._:t.$r._:t._,l=d.indexOf(o),s=d[i];return null!=o?r?(r=!1,a.add(o),e(n,o)):-1===l&&s&&!c?(a.add(o),n.insertBefore(o,s)):c&&s&&3===s.nodeType?(s.textContent=t,i++,void a.add(s)):d[l]===o?(i++,void a.add(o)):s?void 0:(a.add(o),e(n,o)):void 0}),d.forEach(e=>{a.has(e)||n.removeChild(e)})}let r=(()=>{let e=[];return{sHC:t=>e.push({ctx:t,pos:0,effects:[]}),pHC:()=>{let t=e.pop();t.pos=0,t.effects.forEach(e=>e()),t.effects=[]},gHC:()=>e[e.length-1]}})(),s=(e=[],t=[])=>e.length===t.length&&(!e.length&&!t.length||e.every((e,c)=>e===t[c])),[a,p,u]=(()=>{let e=new Map;let t=new Map;let c=new Map;return[function(t){let c=r.gHC(),o=e.get(c.ctx)||[],l=c.pos,n=void 0===o[l]?"function"==typeof t?t():t:o[l];return c.pos+=1,o[l]=n,e.set(c.ctx,o),[n,t=>{let o=e.get(c.ctx)||[];o[l]="function"==typeof t?t(o[l]):t,e.set(c.ctx,o),c.ctx.$&&c.ctx.$(c.ctx.$p)}]},function(e,c){let o=r.gHC(),l=t.get(o.ctx)||[],n=o.pos,i=l[n];o.pos+=1,i&&s(i.cache,c)||i&&Array.isArray(c)&&!c.length||(l[n]={cache:c},t.set(o.ctx,l),o.effects.push(()=>{i&&i.hookDestroy&&i.hookDestroy();let l=e(),d=t.get(o.ctx)||[];d[n]={hookDestroy:l,cache:c},t.set(o.ctx,d)}))},function(e){let t=r.gHC(),o=c.get(t.ctx)||[],l=t.pos,n=o[l];return t.pos+=1,n||(o[l]={current:e},c.set(t.ctx,o),o[l])}]})();const h="all",$="active",f="completed";function g(){var e,t,c="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(c+="-"),c+=(12===e?4:16===e?3&t|8:t).toString(16);return c}function m(e,t,i){var r=i||{$p:e,$:e=>{m(e,t,r)}};t.sHC(r);let s=[];e.todo.completed&&s.push("completed"),e.editing&&s.push("editing");let[p,u]=a(e.todo.title),h=()=>{let t=p.trim();t?e.onSave(t):e.onDestroy()};if(r!==i)return c(r,"bw","li",{$:{class:s.join(" ")}}),c(r,"bx","div",{$:{class:"view"}}),c(r,"by","input",{$:{class:"toggle",type:"checkbox"},$e:{change:e.onToggle},$p:{checked:e.todo.completed}}),d(r,"by"),c(r,"bz","label",{$e:{dblclick:e.onEdit}}),d(r,"bz",[e.todo.title]),c(r,"ca","button",{$:{class:"destroy"},$e:{click:e.onDestroy}}),d(r,"ca"),d(r,"bx",[r.by,r.bz,r.ca]),c(r,"cb","input",{$:{class:"edit"},$e:{input:e=>u(e.target.value),blur:h,keydown:t=>{27===t.which?(e.onCancel(event),u(e.todo.title)):13===event.which&&h()}},$p:{value:p}}),d(r,"cb"),d(r,"bw",[r.bx,r.cb]),r.$r=r.bw,t.pHC(),r;{let c=e.todo.completed;r.by.$p.checked!==c&&l(r.by,"checked",c);let i=e.onToggle;r.by.$p.change!==i&&n(r.by,"change",i),d(r,"bz",[e.todo.title]);let a=e.onEdit;r.bz.$p.dblclick!==a&&n(r.bz,"dblclick",a);let $=e.onDestroy;r.ca.$p.click!==$&&n(r.ca,"click",$);let f=p;r.cb.$p.value!==f&&l(r.cb,"value",f),n(r.cb,"input",e=>u(e.target.value));let g=h;r.cb.$p.blur!==g&&n(r.cb,"blur",g),n(r.cb,"keydown",t=>{27===t.which?(e.onCancel(event),u(e.todo.title)):13===event.which&&h()});let m=s.join(" ");r.bw.$p.class!==m&&o(r.bw,"class",m),t.pHC()}}function w(e,t,l){var i=l||{$p:e,$:e=>{w(e,t,i)}};t.sHC(i);let r=(s=e.count,a="item",1===s?a:a+"s");var s,a;let p=null;if(i!==l)return c(i,"cc","button",{$:{class:"clear-completed"},$e:{click:e.onClearCompleted}}),d(i,"cc",["Clear completed"]),e.completedCount>0&&(p=i.cc),c(i,"cd","footer",{$:{class:"footer"}}),c(i,"ce","span",{$:{class:"todo-count"}}),c(i,"cf","strong"),d(i,"cf",[e.count]),d(i,"ce",[i.cf," ",r," left"]),c(i,"cg","ul",{$:{class:"filters"}}),c(i,"ch","li"),c(i,"ci","a",{$:{href:"#/",class:e.nowShowing===h?"selected":""}}),d(i,"ci",["All"]),d(i,"ch",[i.ci]),c(i,"cj","li"),c(i,"ck","a",{$:{href:"#/active",class:e.nowShowing===$?"selected":""}}),d(i,"ck",["Active"]),d(i,"cj",[i.ck]),c(i,"cl","li"),c(i,"cm","a",{$:{href:"#/completed",class:e.nowShowing===f?"selected":""}}),d(i,"cm",["Completed"]),d(i,"cl",[i.cm]),d(i,"cg",[i.ch,i.cj,i.cl]),d(i,"cd",[i.ce,i.cg,p]),i.$r=i.cd,t.pHC(),i;{let c=e.onClearCompleted;i.cc.$p.click!==c&&n(i.cc,"click",c),e.completedCount>0&&(p=i.cc),d(i,"cf",[e.count]),d(i,"ce",[i.cf," ",r," left"]);let l=e.nowShowing===h?"selected":"";i.ci.$p.class!==l&&o(i.ci,"class",l);let s=e.nowShowing===$?"selected":"";i.ck.$p.class!==s&&o(i.ck,"class",s);let a=e.nowShowing===f?"selected":"";i.cm.$p.class!==a&&o(i.cm,"class",a),d(i,"cd",[i.ce,i.cg,p]),t.pHC()}}function v(e){switch(e){case"#/active":return $;case"#/completed":return f;default:return h}}!function(t,c,o,l){let n=o(l,c);if(n)t.innerHTML="",e(t,n.$r._)}(document.getElementById("app"),r,function e(o,i,r){var s=r||{$p:o,$:t=>{e(t,i,s)}};i.sHC(s);let[u,h]=a(""),[b,y]=a(v(window.location.hash)),[C,k]=function(){let[e,t]=a(JSON.parse(window.localStorage.getItem("__todos__")||"null")||[{id:g(),title:"todo 1",completed:!1},{id:g(),title:"todo 2",completed:!1},{id:g(),title:"todo 3",completed:!0}]);return[e,e=>{window.localStorage.setItem("__todos__",JSON.stringify(e)),t(e)}]}(),[x,H]=a(null);p(()=>{let e=()=>{y(v(window.location.hash))};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)});let _=C.filter(function(e){switch(b){case $:return!e.completed;case f:return e.completed;default:return!0}},this).map(function(e,c){var o={};if(i.sHC(o),o!==r)return t(i,o,"cn",m,{key:e.id,todo:e,editing:x===e.id,onEdit:()=>H(e.id),onSave:t=>{C.splice(c,1,{...e,title:t}),k(C),H(null)},onCancel:()=>H(null),onToggle:()=>{C.splice(c,1,{...e,completed:!e.completed}),k(C)},onDestroy:()=>{C.splice(c,1),k(C)}}),o.$r=o.cn,i.pHC(),o;o.cn.$({key:e.id,todo:e,editing:x===e.id,onEdit:()=>H(e.id),onSave:t=>{C.splice(c,1,{...e,title:t}),k(C),H(null)},onCancel:()=>H(null),onToggle:()=>{C.splice(c,1,{...e,completed:!e.completed}),k(C)},onDestroy:()=>{C.splice(c,1),k(C)}}),i.pHC()},this),S=C.reduce(function(e,t){return t.completed?e:e+1},0),E=C.length-S,D=null,j=null;if(s!==r)return c(s,"co","section",{$:{class:"main"}}),c(s,"cp","input",{$:{id:"toggle-all",class:"toggle-all",type:"checkbox"},$e:{change:()=>{let e=C.every(e=>e.completed);k(C.map(t=>({...t,completed:!e})))}},$p:{checked:0===S}}),d(s,"cp"),c(s,"cq","label",{$:{for:"toggle-all"}}),d(s,"cq"),c(s,"cr","ul",{$:{class:"todo-list"}}),d(s,"cr",[_]),d(s,"co",[s.cp,s.cq,s.cr]),C.length&&(D=s.co),t(i,s,"cs",w,{count:S,completedCount:E,nowShowing:b,onClearCompleted:()=>k(C.filter(e=>!e.completed))}),(S||E)&&(j=s.cs),c(s,"ct","div"),c(s,"cu","header",{$:{class:"header"}}),c(s,"cv","h1"),d(s,"cv",["todos"]),c(s,"cw","input",{$:{class:"new-todo",placeholder:"What needs to be done?",autoFocus:!0},$e:{input:e=>h(e.target.value),keydown:e=>{13===e.keyCode&&u&&(e.preventDefault(),C.push({id:g(),title:u,completed:!1}),k(C),h(""))}},$p:{value:u}}),d(s,"cw"),d(s,"cu",[s.cv,s.cw]),d(s,"ct",[s.cu,D,j]),s.$r=s.ct,i.pHC(),s;{let e=0===S;s.cp.$p.checked!==e&&l(s.cp,"checked",e),n(s.cp,"change",()=>{let e=C.every(e=>e.completed);k(C.map(t=>({...t,completed:!e})))}),d(s,"cr",[_]),C.length&&(D=s.co),s.cs.$({count:S,completedCount:E,nowShowing:b,onClearCompleted:()=>k(C.filter(e=>!e.completed))}),(S||E)&&(j=s.cs);let t=u;s.cw.$p.value!==t&&l(s.cw,"value",t),n(s.cw,"input",e=>h(e.target.value)),n(s.cw,"keydown",e=>{13===e.keyCode&&u&&(e.preventDefault(),C.push({id:g(),title:u,completed:!1}),k(C),h(""))}),d(s,"ct",[s.cu,D,j]),i.pHC()}},null);