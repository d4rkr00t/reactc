function e(e,t){e.appendChild(t)}function t(e,t,c,l,o){if(t[c])return void(t[c].$&&t[c].$(o));let n=l(o,e);t[c]=n}function c(e,t,c,l){if(e[t])return void i(e[t],l);let o={_:document.createElement(c),$p:l,$h:{}};i(o,l),e[t]=o}function l(e,t,c){c?e._.setAttribute(t,c):e._.removeAttribute(t),e.$p[t]=c}function o(e,t,c){e._[t]=c,e.$p[t]=c}function n(e,t,c){e.$p[t]&&e._.removeEventListener(t,e.$p[t]),e._.addEventListener(t,c),e.$p[t]=c}function i(e,t){t&&(t.$&&Object.keys(t.$).forEach(c=>l(e,c,t.$[c])),t.$e&&Object.keys(t.$e).forEach(c=>n(e,c,t.$e[c])),t.$p&&Object.keys(t.$p).forEach(c=>o(e,c,t.$p[c])),e.$p=t)}function d(t,c,l,o){let n=t[c]._,i=o||0,d=Array.from(n.childNodes),r=!d.length;if(!l||!d.length&&!l.length)return i;let a=l.reduce((e,t)=>e.concat(t),[]),s=new WeakSet;a.forEach(t=>{if(null==t)return;let c=function(e){return"string"==typeof e||"number"==typeof e}(t),l=c?document.createTextNode(t):t.$r?t.$r.$r?t.$r.$r._:t.$r._:t._,o=d.indexOf(l),a=d[i];return null!=l?r?(r=!1,s.add(l),e(n,l)):-1===o&&a&&!c?(s.add(l),n.insertBefore(l,a)):c&&a&&3===a.nodeType?(a.textContent=t,i++,void s.add(a)):d[o]===l?(i++,void s.add(l)):a?void 0:(s.add(l),e(n,l)):void 0}),d.forEach(e=>{s.has(e)||n.removeChild(e)})}let r=(()=>{let e=[];return{sHC:t=>e.push({ctx:t,pos:0}),pHC:()=>{e.pop().pos=0},gHC:()=>e[e.length-1]}})(),[a,s]=(()=>{let e=new Map;let t=new Map;return[function(t){let c=r.gHC(),l=e.get(c.ctx)||[],o=c.pos,n=void 0===l[o]?t:l[o];return c.pos+=1,l[o]=n,e.set(c.ctx,l),[n,t=>{let l=e.get(c.ctx)||[];l[o]=t,e.set(c.ctx,l),c.ctx.$&&c.ctx.$(c.ctx.$p)}]},function(e){let c=r.gHC(),l=t.get(c.ctx)||[],o=c.pos,n=l[o];n&&n();let i=e();i&&(l[o]=i,t.set(c.ctx,l))}]})();const p="all",u="active",$="completed";function h(){var e,t,c="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(c+="-"),c+=(12===e?4:16===e?3&t|8:t).toString(16);return c}function b(e,t,i){var r=i||{$p:e,$:e=>{b(e,t,r)}};t.sHC(r);let s=[];e.todo.completed&&s.push("completed"),e.editing&&s.push("editing");let[p,u]=a(e.todo.title),$=()=>{let t=p.trim();t?e.onSave(t):e.onDestroy()};if(r!==i)return c(r,"bt","li",{$:{class:s.join(" ")}}),c(r,"bu","div",{$:{class:"view"}}),c(r,"bv","input",{$:{class:"toggle",type:"checkbox"},$e:{change:e.onToggle},$p:{checked:e.todo.completed}}),d(r,"bv"),c(r,"bw","label",{$e:{dblclick:e.onEdit}}),d(r,"bw",[e.todo.title]),c(r,"bx","button",{$:{class:"destroy"},$e:{click:e.onDestroy}}),d(r,"bx"),d(r,"bu",[r.bv,r.bw,r.bx]),c(r,"by","input",{$:{class:"edit"},$e:{input:e=>u(e.target.value),blur:$,keydown:t=>{27===t.which?(e.onCancel(event),u(e.todo.title)):13===event.which&&$()}},$p:{value:p}}),d(r,"by"),d(r,"bt",[r.bu,r.by]),r.$r=r.bt,t.pHC(),r;{let c=e.todo.completed;r.bv.$p.checked!==c&&o(r.bv,"checked",c);let i=e.onToggle;r.bv.$p.change!==i&&n(r.bv,"change",i);let a=e.onEdit;r.bw.$p.dblclick!==a&&n(r.bw,"dblclick",a),d(r,"bw",[e.todo.title]);let h=e.onDestroy;r.bx.$p.click!==h&&n(r.bx,"click",h);let b=p;r.by.$p.value!==b&&o(r.by,"value",b),n(r.by,"input",e=>u(e.target.value));let f=$;r.by.$p.blur!==f&&n(r.by,"blur",f),n(r.by,"keydown",t=>{27===t.which?(e.onCancel(event),u(e.todo.title)):13===event.which&&$()});let g=s.join(" ");r.bt.$p.class!==g&&l(r.bt,"class",g),t.pHC()}}function f(e,t,o){var i=o||{$p:e,$:e=>{f(e,t,i)}};t.sHC(i);let r=(a=e.count,s="item",1===a?s:s+"s");var a,s;let h=null;if(i!==o)return c(i,"bz","button",{$:{class:"clear-completed"},$e:{click:e.onClearCompleted}}),d(i,"bz",["Clear completed"]),e.completedCount>0&&(h=i.bz),c(i,"ca","footer",{$:{class:"footer"}}),c(i,"cb","span",{$:{class:"todo-count"}}),c(i,"cc","strong"),d(i,"cc",[e.count]),d(i,"cb",[i.cc," ",r," left"]),c(i,"cd","ul",{$:{class:"filters"}}),c(i,"ce","li"),c(i,"cf","a",{$:{href:"#/",class:e.nowShowing===p?"selected":""}}),d(i,"cf",["All"]),d(i,"ce",[i.cf]),c(i,"cg","li"),c(i,"ch","a",{$:{href:"#/active",class:e.nowShowing===u?"selected":""}}),d(i,"ch",["Active"]),d(i,"cg",[i.ch]),c(i,"ci","li"),c(i,"cj","a",{$:{href:"#/completed",class:e.nowShowing===$?"selected":""}}),d(i,"cj",["Completed"]),d(i,"ci",[i.cj]),d(i,"cd",[i.ce,i.cg,i.ci]),d(i,"ca",[i.cb,i.cd,h]),i.$r=i.ca,t.pHC(),i;{let c=e.onClearCompleted;i.bz.$p.click!==c&&n(i.bz,"click",c),e.completedCount>0&&(h=i.bz),d(i,"cc",[e.count]),d(i,"cb",[i.cc," ",r," left"]);let o=e.nowShowing===p?"selected":"";i.cf.$p.class!==o&&l(i.cf,"class",o);let a=e.nowShowing===u?"selected":"";i.ch.$p.class!==a&&l(i.ch,"class",a);let s=e.nowShowing===$?"selected":"";i.cj.$p.class!==s&&l(i.cj,"class",s),d(i,"ca",[i.cb,i.cd,h]),t.pHC()}}function g(e){switch(e){case"#/active":return u;case"#/completed":return $;default:return p}}!function(t,c,l,o){let n=l(o,c);if(n)t.innerHTML="",e(t,n.$r._)}(document.getElementById("app"),r,function e(l,i,r){var p=r||{$p:l,$:t=>{e(t,i,p)}};i.sHC(p);let[m,v]=a(""),[w,C]=a(g(window.location.hash)),[y,k]=function(){let[e,t]=a(JSON.parse(window.localStorage.getItem("__todos__")||"null")||[{id:h(),title:"todo 1",completed:!1},{id:h(),title:"todo 2",completed:!1},{id:h(),title:"todo 3",completed:!0}]);return[e,e=>{window.localStorage.setItem("__todos__",JSON.stringify(e)),t(e)}]}(),[x,_]=a(null);s(()=>{let e=()=>{C(g(window.location.hash))};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)});let H=y.filter(function(e){switch(w){case u:return!e.completed;case $:return e.completed;default:return!0}},this).map(function(e,c){var l={};if(i.sHC(l),l!==r)return t(i,l,"ck",b,{key:e.id,todo:e,editing:x===e.id,onEdit:()=>_(e.id),onSave:t=>{y.splice(c,1,{...e,title:t}),k(y),_(null)},onCancel:()=>_(null),onToggle:()=>{y.splice(c,1,{...e,completed:!e.completed}),k(y)},onDestroy:()=>{y.splice(c,1),k(y)}}),l.$r=l.ck,i.pHC(),l;l.ck.$({key:e.id,todo:e,editing:x===e.id,onEdit:()=>_(e.id),onSave:t=>{y.splice(c,1,{...e,title:t}),k(y),_(null)},onCancel:()=>_(null),onToggle:()=>{y.splice(c,1,{...e,completed:!e.completed}),k(y)},onDestroy:()=>{y.splice(c,1),k(y)}}),i.pHC()},this),S=y.reduce(function(e,t){return t.completed?e:e+1},0),E=y.length-S,j=null,D=null;if(p!==r)return c(p,"cl","section",{$:{class:"main"}}),c(p,"cm","input",{$:{id:"toggle-all",class:"toggle-all",type:"checkbox"},$e:{change:()=>{let e=y.every(e=>e.completed);k(y.map(t=>({...t,completed:!e})))}},$p:{checked:0===S}}),d(p,"cm"),c(p,"cn","label",{$:{for:"toggle-all"}}),d(p,"cn"),c(p,"co","ul",{$:{class:"todo-list"}}),d(p,"co",[H]),d(p,"cl",[p.cm,p.cn,p.co]),y.length&&(j=p.cl),t(i,p,"cp",f,{count:S,completedCount:E,nowShowing:w,onClearCompleted:()=>k(y.filter(e=>!e.completed))}),(S||E)&&(D=p.cp),c(p,"cq","div"),c(p,"cr","header",{$:{class:"header"}}),c(p,"cs","h1"),d(p,"cs",["todos"]),c(p,"ct","input",{$:{class:"new-todo",placeholder:"What needs to be done?",autoFocus:!0},$e:{input:e=>v(e.target.value),keydown:e=>{13===e.keyCode&&m&&(e.preventDefault(),y.push({id:h(),title:m,completed:!1}),k(y),v(""))}},$p:{value:m}}),d(p,"ct"),d(p,"cr",[p.cs,p.ct]),d(p,"cq",[p.cr,j,D]),p.$r=p.cq,i.pHC(),p;{let e=0===S;p.cm.$p.checked!==e&&o(p.cm,"checked",e),n(p.cm,"change",()=>{let e=y.every(e=>e.completed);k(y.map(t=>({...t,completed:!e})))}),d(p,"co",[H]),y.length&&(j=p.cl),p.cp.$({count:S,completedCount:E,nowShowing:w,onClearCompleted:()=>k(y.filter(e=>!e.completed))}),(S||E)&&(D=p.cp);let t=m;p.ct.$p.value!==t&&o(p.ct,"value",t),n(p.ct,"input",e=>v(e.target.value)),n(p.ct,"keydown",e=>{13===e.keyCode&&m&&(e.preventDefault(),y.push({id:h(),title:m,completed:!1}),k(y),v(""))}),d(p,"cq",[p.cr,j,D]),i.pHC()}},null);